networks:
  # docker network create mynet
  mynet:
volumes:
  # docker volume create data-vol
  data-vol:

services: 
  # docker run -d --mount type=volume,src=data-vol,dst=/var/lib/mysql --network=mynet
  mydb:
    image: stackupiss/northwind-db:v1
    volumes:
    - type: volume
      source: data-vol
      target: /var/lib/mysql
    environment:
    - MYSQL_ROOT_PASSWORD=changeit
    networks:
    - mynet

  # docker run -d -p 8080:3000 -e ... -network=mynet
  myapp:
    image: stackupiss/northwind-app:v1
    environment: 
    - DB_HOST=mydb
    - DB_USER=root
    - DB_PASSWORD=changeit
    ports:
    - 8080:3000
    networks:
    - mynet
    depends_on:
      mydb:
        condition: service_started

# docker compose up
# docker compose ps -a
# docker compose down

# docker compose up mydb
# docker compose down -v
